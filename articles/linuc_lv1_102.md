---
title: "LinuCレベル1 102試験に合格した話【勉強法や試験の感想など】"
emoji: "🦔"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---


主題1.06：シェルおよびスクリプト
1.06.1 シェル環境のカスタマイズ
重要度	4
概要	ユーザの要求に応じてシェル環境をカスタマイズできる。全体のプロファイルおよびユーザのプロファイルを変更する。
詳細	
ログイン時または新しいシェルを生成したときに、環境変数（PATHなど）を設定する。
/etc/bash.bashrc, /etc/profile
~/.bash_profile, ~/.bash_login, ~/.profile, ~/.bashrc, ~/.bash_logout
., source, lists(;, &&, ||)
コマンド置換を使用する。
alias
コマンドサーチパスを適切なディレクトリに設定する。
PATH

---

1.06.2 シェルスクリプト
重要度	6
概要	
簡単なBashスクリプトを新規作成できる。
作成したBashスクリプトをシステムの利用者に適用できる。
処理結果により動作を分岐できるスクリプトを作成できる。
Linux スキルの無いユーザに規定のコマンドを実行できる環境を提供できる。
シェルスクリプトの引数を処理できる。
詳細	
よく使用する一連のコマンド用にBashの関数を作成する。
function
先頭行(#!)を利用して、適切なスクリプトインタプリタを選択する。
スクリプトの位置、所有権、実行権を管理する。
chown, chmod
標準的なshの構文（ループ）を使用する。
for, while
コマンドの成功または失敗を示す戻り値を使用する。または、つぎに渡すコマンドのために戻り値を指定して終了する。
$?, exit
条件に応じて処理を変更する。
if, case
引数に応じて処理を変更する。
$#, $*, $@, $0, $1..$n, shift
使用するユーザに依存しないスクリプトを作成する。
PATH
シェルスクリプトをデバッグする。
bash -v, bash -x
主題1.07：ネットワークの基礎

---

1.07.1 インターネットプロトコルの基礎
重要度	4
概要	TCP/IPネットワークの基礎を適切に理解していることを示すことができる。
詳細	
ネットワークマスクとCIDR表記法。
サブネット化
プライベートとパブリックのドット区切り形式のIPアドレスの違い。
一般的なTCPおよびUDPのポート(22/SSH, 25/SMTP, 53/DNS, 80/HTTP, 123/NTP, 443/HTTPS)
UDP、TCP、およびICMPの違いや主な機能
IPv4とIPv6の主な違い
IPv6の基本的な機能
1.07.2 基本的なネットワーク構成
重要度	4
概要	ホスト上の設定を参照、変更、確認できる。
詳細	
ネットワークインターフェイスの設定を手作業および自動で行う。
/etc/hostname
ifconfig, ifup, ifdown, nmcli
ip addr
ホストの基本的なTCP/IP設定
/etc/hosts, /etc/nsswitch.conf, ping
デフォルトルートの設定
ip route, route

---

1.07.3 基本的なネットワークの問題解決
重要度	4
概要	ホスト上のネットワークに関する問題解決ができる。
詳細	
ネットワークに関する問題の原因を調査する。
host, dig, ping, ping6, netcat(nc, ncat), netstat, ss
traceroute, traceroute6, tracepath, tracepath6
必要に応じてネットワークインターフェイスの追加、起動、停止、再起動、削除、および再設定する。
ifconfig, ifup, ifdown, hostname
ルーティングテーブルを変更、参照、設定し、不適切なデフォルトルート設定を手作業で訂正する。
ip route, route

---

1.07.4 クライアント側のDNS設定
重要度	2
概要	DNSクライアントの設定ができる。
詳細	
リモートDNSサーバーに問い合わせる。
host, dig
ローカルの名前解決の設定によりリモートDNSサーバーを使用する。
/etc/resolv.conf
名前解決の実行順序を変更する。
getent, /etc/nsswitch.conf, /etc/hosts

---

主題1.08：システム管理
1.08.1 アカウント管理
重要度	5
概要	ユーザアカウントの追加、削除、一時停止、変更ができる。
詳細	
ユーザおよびグループを追加、変更、削除する。
useradd, userdel, usermod
groupadd, groupdel, groupmod
/etc/default/useradd
新しいユーザアカウント用のスケルトンディレクトリを保守する。
/etc/skel/
パスワード/グループデータベースにあるユーザ/グループ情報を管理する。これには複数グループの所属も含む。
passwd, /etc/passwd, /etc/shadow, /etc/group
getent, id

---

1.08.2 ジョブスケジューリング
重要度	4
概要	cronまたはanacronを使用して定期的にジョブを実行したり、atを使用して指定時刻にジョブを実行できる。
詳細	
cronおよびatでジョブを管理する。
/var/spool/cron/
ユーザがcronおよびatサービスにアクセスできるよう設定する。
/etc/cron.allow, /etc/cron.deny
/etc/at.deny, /etc/at.allow
at, atq, atrm
/etc/cron.{d,daily,hourly,monthly,weekly}/
/etc/crontab
anacronの設定
/etc/anacrontab

---

1.08.3 ローカライゼーションと国際化
重要度	3
概要	システムを英語以外の言語にローカライズできる。スクリプトでLANG=Cが役立つ理由についても理解している。
詳細	
国際化(i18n) とローカライゼーション(l10n)の基本を理解している。
ロケール設定と環境変数を設定する。
LANG, LC_ALL, LC_*
/usr/bin/locale
iconv, UTF-8, ISO-8859, ASCII, Unicode, ISO-2022-JP

---

主題1.09：重要なシステムサービス
1.09.1 システム時刻の管理
重要度	2
概要	システム時刻を適切に維持し、NTPやchronyによって時計を同期できる。
詳細	
システムの日付および時刻を設定する。
date
ハードウェアの時計に時刻を設定する。
hwclock
正しいタイムゾーンを設定する。
/usr/share/zoneinfo/, /etc/timezone, /etc/localtime
TZ, tzselect, timedatectl
基本的なNTP設定
ntpd, ntpdate, ntp.conf
chronyd, chronyc, chrony.conf
公的な標準 NTP サーバーを使用できる。
pool.ntp.org
ntpq コマンドについて知っている。

---

1.09.2 システムのログ
重要度	5
概要	
rsyslogデーモンを設定できる。
これには、ログ出力を中央のログサーバーに送信するようログデーモンを設定することが含まれる。
または中央のログサーバーとしてログ出力を受け入れることも含まれる。
systemd のジャーナルサブシステムを使用できる。
ログのローテーション、圧縮、削除を自動化できる。
詳細	
rsyslogデーモンを設定する。
rsyslog.conf, rsyslogd
systemd のジャーナルの問い合わせ、フィルタ、削除する。
標準的なファシリティ、優先度、およびアクションを理解する。
logger, systemd-cat
journalctl, /etc/systemd/journald.conf, /var/log/journal/
logrotateを設定する。
logrotate, /etc/logrotate.conf, /etc/logrotate.d/, /var/log/

---

1.09.3 メール配送エージェント(MTA)の基本
重要度	2
概要	一般的に使用可能なMTAプログラムについて概要を理解し、ホストで配送とエイリアスの基本的な設定を行える。その他の設定ファイルについては対象外となる。
詳細	
電子メールのエイリアスを作成する。
/etc/aliases, newaliases
電子メールの配送設定をする。
~/.forward, mail, mailq
一般的に使用可能なMTAプログラムについて知っている（設定は含まない）。
postfix, exim

---

主題1.10：セキュリティ
1.10.1 セキュリティ管理業務の実施
重要度	3
概要	システム構成を調べて、ホストのセキュリティをローカルセキュリティポリシーに従わせる方法を知っている。
詳細	
システムを監査して、SUID/SGIDビットが設定されているファイルを探す。
find
ユーザのパスワードおよびパスワードエージング情報を設定または変更する。
passwd, usermod, chage
nmapおよびnetstatを使用して、システムの開いているポートを見つける。
ss, netstat, nmap, lsof, fuser
ユーザのログイン状況や履歴を把握する。
who, w, last
ユーザのログイン、プロセス、メモリー使用量を制限する。
ulimit
基本的なsudoの設定および利用ができる。
su, sudo, /etc/sudoers
自動ログアウトの設定をする。
TMOUT

---

1.10.2 ホストのセキュリティ設定
重要度	3
概要	基本的なレベルのホストのセキュリティの設定方法を知っている。
詳細	
シャドウパスワードおよびその機能について知っている。
/etc/passwd, /etc/shadow, /etc/nologin
使用していないネットワークサービスをオフにする。
/etc/xinetd.d/, /etc/xinetd.conf
/etc/inetd.d/, /etc/inetd.conf
systemctl, /etc/init.d/
chkconfig, service
Firewallの概要を知っている。
iptables, firewalld

---

1.10.3 暗号化によるデータの保護
重要度	3
概要	
公開鍵技術の基本を理解している。
公開鍵技術を使用して、データおよび通信を保護できる。
詳細	
OpenSSH クライアントの設定および利用ができる。
ssh-keygen, ssh-agent, ssh-add
主要な暗号化アルゴリズムと特徴を知っている。
rsa, ecdsa, ed25519
SSHポート転送について理解している。
基本的なGnuPGの設定および利用ができる。
gpg, gpg-agent, ~/.gnupg/

---

1.10.4 クラウドセキュリティの基礎
重要度	3
概要	
パブリッククラウドとオンプレミスのLinuxサーバーのセキュリティ対応の差について知っている。
パブリッククラウド上にあるLinuxサーバーのリスクを理解できる。
詳細	
パブリッククラウドの管理機能とLinuxサーバーの機能分担について理解している。
管理コンソール、 ファイアウォール、ルーティング
リージョン選択（国内外の制約も含む）の意味を理解している。
パブリッククラウドの揮発性ストレージの利用方法を理解している。
クラウドサービス事業者の制約による管理
メンテナンス、再起動
パブリッククラウドの管理コンソール(システムコンソール)へのアクセス経路と認証方式について知っている。
インターネット経由でのアクセス、クラウドサービス事業者提供の認証方法
多段階・多要素認証、ワンタイムパスワード--

---

主題1.11：オープンソースの文化
1.11.1 オープンソースの概念とライセンス
重要度	2
概要	
オープンソースの定義や特徴を知っている。
主要なオープンソースのライセンスについて知っている。
詳細	
オープンソースの定義を理解している。
自由
ソースコード
オープンソースの特徴を理解している。
著作物
無保証
継続した開発
多くのライセンスが存在
主要なライセンスの特徴を知っている。
GPL, AGPL, LGPL, MPL, BSD系(MIT, Apache V2), パブリックドメイン
改変と再配布

---

1.11.2 オープンソースのコミュニティとエコシステム
重要度	1
概要	オープンソース開発のしくみを知っている。
詳細	
コミュニティの構成や参加方法を知っている。
メーリングリスト、掲示板、開発サイト、開発体制
オープンソースエコシステムへの参加について知っている。
使用、紹介、バグ報告

---

#メモ
・ssh-agent メモリ上に秘密鍵を保管しておく、認証エージェント
addコマンドで秘密鍵とペアになるパスフレーズを入力して、鍵情報を登録する
一覧表示をするにはssh-add -l

・sshコマンドのオプションで接続先ポート番号を指定するもの
ssh -p , ssh -o Port

・公開鍵は暗号、秘密鍵は復号
相手の公開鍵で暗号する

・shh接続
ユーザー名＠ホスト名
ssh -l ユーザー名
ssh -o User=ユーザ名

・firewalld　デフォルトで用意されているゾーン
drop
public
internal

---

## コピーレフトやら

| 分類             | コピー・再配布 | 改変 | 改変部分を含めたソースコードの公開 | 他のコードと組み合わせた場合、他のソースコードの公開 | ライセンス例                            | 代表的なソフトウェア                        |
| :--------------- | :------------- | :--- | :--------------------------------- | :--------------------------------------------------- | :-------------------------------------- | :------------------------------------------ |
| コピーレフト型   | 可能           | 可能 | 必要                               | 必要                                                 | GPL,AGPL                                | Linux,GNU系ソフトウェア                     |
| 準コピーレフト型 | 可能           | 可能 | 必要                               | 不要                                                 | LGPL,MPL                                | glibc,Mozilla, Firefox                      |
| 非コピーレフト型 | 可能           | 可能 | 不要                               | 不要                                                 | BSD License,MIT License, Apache License | FreeBSD, X Window System, Apache HTTP Sever |

AGPL 利用者はソースコードの開示を要求できるオープンソースライセンス

## IPアドレス
プライベートアドレスの範囲
クラスA 10.0.0.0 - 10.255.255.255
クラスB 172.16.0.0 - 172.31.255.255
クラスC 192.168.0.0 - 192.168.255.255

IPアドレス全体のクラス
クラスA 0.0.0.0 - 127.255.255.255
クラスB 128.0.0.0 - 191.255.255.255
クラスC 192.0.0.0 - 191.255.255.255
クラスD 244.0.0.0 - 239.255.255.255
クラスE 240.0.0.0 - 255.255.255.255

IPv6 は16進数(0-9 A-F)で表し、全体128ビットを16ビット(4桁ずつ)をコロン:で区切って8ブロックとする
各ブロックの先頭にある0は省略可能
0000は0に省略可能
連続した0000のブロックは1回に限り省略可能

・getentコマンド -名前解決の順序-
/etc/nsswitch.confの設定にしたがって検索を行うコマンド

host,nslookup,digコマンドはDNSサーバに直接問い合わせを行う。しかし問い合わせ先のDNSサーバを指定する/etc/resolv.confが0バイトだとDNSサーバの指定がされていない

hostnameは一時的に自身のホスト名を変更するコマンド

・isetdコマンド
設定ファイルは/etc/inted.conf

・ntpdateコマンド -時間系のコマンド-
NTPサーバーから正確な時間を取得し、直ちにシステムクロックに反映させる
NTPクライアントである
手動でNTPサーバーから正確な時刻を取得し、システムクロックに反映させる

・chronycコマンド-時間系- 新しいコマンド
chronyd(NTPサーバ/クライアント)の管理を行うコマンド
設定ファイルは/etc/chrony.conf

・MTU調査-Maximum Transmission Unit-
MTUはネットワークで1回で送信できるパケットの最大サイズのこと

・routeコマンド-ネットワーク系-
ルーティングテーブルの表示、追加、削除を行う
デフォルトを削除する場合route del defaultのみでgwはつけない

・ifconfigコマンド-ネットワーク系-(インターフェースコンフィグ)
インターフェースのアップ・ダウン状態が変更される
ifconfigコマンドを実行しても、なんも影響がない場合もある
ifconfigコマンドでネットワークインターフェースの情報の表示や設定を行うことができる

・pingコマンド
ICMPエコー要求パケットを送信すると、ICMPエコー応答パケットが返される
時間超過や宛先到達不能などのエラーの原因が返される
pingコマンドはエラーメッセージや制御メッセージを通知するICMPというプロトコルを使って、ネットワークの疎通確認を行う

・chkconfiコマンド
自動設定を行うためのもの
/etc/chrony.conf 時刻を取得するNTPサーバを指定する設定項目はserver
serverで時刻を取得するNTPサーバを指定 サーバ/クライアントの関係
peerで時刻を取得するNTPサーバを指定 同じstratum階層同士

・serviceコマンド(古いコマンド)
systemdが採用される前のRHEL 6系ディストリビューションではserviceコマンドを使用して、サービスの起動・停止・ステータス確認を行える

・MTA(Message Transfer Agent)
メールの配送を行うソフトウェアの総称。メールサーバーとして使われる
Postfix、eximなどのメールサーバーがある

・BIND
標準的なDNSサーバーソフトウェア

・xinetd
スーパーサーバーの一種

・ncコマンド(netcat) 通信系
TCP/UDPを使った通信を手軽に行うことができる便利ツール
-u デフォルトのTCP接続をUDP接続に変更する
-l リッスン 指定したアドレス、ポート番号で接続の待ち受けをする

・ulimitコマンド -シェル系-
ユーザやシェルが利用できるリソースの制限するコマンド
ユーザの誤操作やプログラムのバグ、悪意のあるユーザーによるリソースの消費などを回避するために使われる

・ipコマンド -ネットワーク系-(新しいコマンド)
ip addr でIPアドレスの設定状況を確認できる aと省略も可能
ip link (ip l,li)はネットワークデバイス
ip neighbour はiPv4のARPきゃっす、iPv6のNDキャッシュ
ip route ルーティングテーブル
viaは~を経由しての意味がある

・digコマンド-DNS関係-
DNSサーバに直接問い合わせて、指定した名前に関するDNSサーバからの応答を表示する
dig a IPアドレス
dig any すべての情報
dig mx メールサーバの情報
dig ns ネームサーバの情報
dig soa ゾーンの情報 -tオプションで検索タイプを指定
dig txt テキスト情報

journalctlコマンド
systemdの動作するシステムではsystem-journaldデーモンを動作させてログの一元管理を行う
systemd-journaldはsystemdから起動したプロセスの標準出力やsyslogへのログメッセージをバイナリ形式で記録する
デフォルトではページャによる表示を行い、ページャを無効にするには --no-pagerオプションを指定する
指定したコマンドの実行結果をsystemd-journaldのジャーナルファイルに書き込むにはsystemd-catコマンドを使う。loggerコマンドと同様

・localeコマンド -t -シェル系-
localeで現在のロケールの設定が確認できる

・cronのアクセス設定
/etc/cron.allowで許可するユーザーを指定
/etc/cron.denyで許可しないユーザーを指定
/etc/crontabにはコマンドの実行ユーザも指定する
/etc/crontabはシステム用の設定ファイルである

・at、batchのアクセス設定
/etc/at.allowで許可するユーザーを指定
/etc/at.denyで許可しないユーザーを指定

・デフォルトゲートウェイの設定が正しいか確認するコマンド
ip route show
route
netstat -r

cat /etc/hostsでipアドレスとホスト名の確認ができる

timedatectl status
timedatectl
で現在のシステム時刻や状態を表示する(systemdのコマンド)
dateコマンドはLinuxカーネルが持つ時刻を操作する
timedatectlはシステムクロックとハードウェアクロックを同時に設定できる。
dateコマンドはシステムクロックのみ

/etc/groupファイルの中にはグループのパスワードとグループに所属するメンバーが記載されている

対話的ログインを禁止する方法
usermod -s /bin/false hoge2
chsh -s /sbin/nologin hoge2

メールサーバやFTPサーバなどではユーザアカウントは必要ですが、ユーザがシステムにログインしシェルを利用する必要がない場合もあります。
このような場合に対話的ログインを禁止します
対話的ログインを禁止するにはログインシェルを/bin/falseまたは/sbin/nologinに設定します
ログインシェルはusermod -s や useradd -s (ユーザ作成時)コマンドで設定できます
シェル変更専用のchshコマンドでも変更が可能 オプションでシェルを指定する場合、chsh -sを使用する

・useraddコマンド
-g グループ名 プライマリーグループを指定
-G グループ名 プライマリーグループ以外に参加する補助グループ
-d ディレクトリ ホームディレクトリを指定
-m ホームディレクトリを作成
-c コメント
-s シェル ログインシェルを指定
-D アカウントのデフォルト値を表示または設定

ファイル名1 -nt ファイル名2 
ファイル名1の更新日付がファイル2より新しければ真
ファイル名1 -ot ファイル名2
ファイル名1の更新日付がファイル2より古ければ真

・fuserコマンド
ローカルホストのリソースを使用しているプロセスを探して、情報を表示する
lsofコマンドは情報を表示するだけ、fuserコマンドは表示だけでなく、プロセスにシグナルを送ることができる
-k プロセスにSIGKILLを送信
-m マウントされたファイルシステムを指定
-n 検索する領域を指定
-u 検索結果にユーザー名を追加
-v 詳細な情報を表示

・NetworkManagerは動的にネットワークを管理する仕組み
様々なディストリビューションで採用。Red Hat Enterprise Linux6では従来のinitスクリプトによるネットワーク設定の代わりに標準のネットワーク設定として導入されています
ノートPCなどの移動式のデバイスでは、ネットワーク環境を切り替えるのに便利な機能。

・bashコマンド
-v シェルが読み込んだこれから実行する行を標準エラー出力に出力する
-x シェルが実行した行を単純なコマンドや変数を展開して標準エラー出力に出力する

gpgコマンド
--gen-key 公開鍵暗号方式の鍵ペアを作成する
--export 公開鍵をエクスポートする
--import 公開鍵をインポートする
--list-keys 公開鍵を一覧表示する
--sign ファイルに署名する
--verify ファイルの署名を検証する
-e ファイル名 暗号化データを受け取る側の公開鍵を使用してファイルを暗号化する
-o ファイル名 出力ファイル名を指定する
-r メールアドレス 暗号化に使用する公開鍵の持ち主のメールアドレスを指定する

/etc/ssh/sshd_configファイルはsshサーバの設定ファイル
-x オプションでDISPLAY環境変数が自動で設定される

ホスト名を恒久的に書き換えるには/etc/hostname,/etc/sysconfig/networkに書き込む